/**
 * AppShell
 * 
 * Tier 3 — Composite Layout Component
 * Defines the high-level page layout for LFX One.
 * Composes major regions: navigation, header, content, aside.
 * 
 * VISUAL STRUCTURE:
 * - AppShell establishes the application background
 * - Content is inset from viewport edges
 * - Navigation and content feel structurally connected
 * - Pages feel anchored, not floating on canvas
 * 
 * Token bindings (allowed - LAYOUT ONLY):
 * - --color-app-shell-surface-background
 * - --color-app-shell-surface-border
 * - --radius-app-shell
 * - --spacing-app-shell-padding
 * - --spacing-app-shell-region-gap
 * - --spacing-app-shell-nav-width
 * 
 * NOT allowed:
 * - text color tokens
 * - typography tokens
 * - icon tokens
 * - child component tokens
 */

.lfx-app-shell {
  /* Full viewport */
  display: grid;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  
  /* 
   * Application background (ALWAYS PRESENT)
   * 
   * This establishes the application frame and prevents
   * white canvas bleed. The background is NOT optional.
   * 
   * AppShell background ≠ Card background
   * AppShell background = Page-level surface (neutral-100)
   */
  background: var(--color-app-shell-surface-background);
  
  /* Grid template areas */
  grid-template-areas:
    "nav header header"
    "nav content aside";
  
  /* Grid columns: [nav] [content] [aside] */
  grid-template-columns: auto 1fr auto;
  grid-template-rows: auto 1fr;
  
  /* 
   * Horizontal inset (STRUCTURAL)
   * 
   * Content should NOT touch viewport edges.
   * This creates visual separation and makes pages
   * feel anchored inside the application frame.
   * 
   * Applied at AppShell level ONLY.
   * PageLayout must NOT add its own horizontal padding.
   */
  padding-inline: var(--spacing-24);
  
  /*
   * Vertical spacing (TOP ONLY)
   * 
   * Top padding creates breathing room and aligns
   * navigation with content at the top edge.
   * 
   * Bottom padding intentionally omitted to allow
   * content to scroll flush to viewport bottom.
   */
  padding-block-start: var(--spacing-16);
  padding-block-end: var(--spacing-0);
  
  /*
   * Gap between regions
   * 
   * Horizontal gap between nav and content creates
   * clear visual separation while maintaining
   * structural connection.
   */
  gap: var(--spacing-16);
}

/* ========================================
   Container Variants
   ======================================== */

/*
 * withBackground variant (DEPRECATED)
 * 
 * Background is now always present on AppShell.
 * This variant exists for backward compatibility only.
 * 
 * DO NOT USE in new code.
 */
.lfx-app-shell--with-background {
  /* No-op: background already applied to base class */
}

.lfx-app-shell--with-border {
  border: 1px solid var(--color-app-shell-surface-border);
  border-radius: var(--radius-app-shell);
}

/* ========================================
   Dense Variant
   Reduced spacing (horizontal inset + gap only)
   ======================================== */

.lfx-app-shell--dense {
  /*
   * Dense mode reduces horizontal inset and region gap.
   * Top padding intentionally preserved for vertical rhythm.
   */
  padding-inline: var(--spacing-16);
  gap: var(--spacing-8);
}

/* ========================================
   Region: Navigation
   ======================================== */

.lfx-app-shell__nav {
  grid-area: nav;
  width: var(--spacing-app-shell-nav-width);
  overflow-y: auto;
  overflow-x: hidden;
}

/* When nav is not present, content spans */
.lfx-app-shell:not(:has(.lfx-app-shell__nav)) {
  grid-template-areas:
    "header header header"
    "content content aside";
  grid-template-columns: 1fr auto;
}

/* ========================================
   Region: Header
   ======================================== */

.lfx-app-shell__header {
  grid-area: header;
  overflow: hidden;
}

/* When header is not present, adjust grid */
.lfx-app-shell:not(:has(.lfx-app-shell__header)) {
  grid-template-areas: "nav content aside";
  grid-template-rows: 1fr;
}

/* When nav AND header not present */
.lfx-app-shell:not(:has(.lfx-app-shell__nav)):not(:has(.lfx-app-shell__header)) {
  grid-template-areas: "content aside";
  grid-template-columns: 1fr auto;
  grid-template-rows: 1fr;
}

/* ========================================
   Region: Content (Required)
   ======================================== */

.lfx-app-shell__content {
  grid-area: content;
  overflow-y: auto;
  overflow-x: hidden;
}

/* ========================================
   Region: Aside (Optional)
   ======================================== */

.lfx-app-shell__aside {
  grid-area: aside;
  overflow-y: auto;
  overflow-x: hidden;
}

/* When aside is not present, adjust grid */
.lfx-app-shell:not(:has(.lfx-app-shell__aside)) {
  grid-template-columns: auto 1fr;
}

.lfx-app-shell:not(:has(.lfx-app-shell__nav)):not(:has(.lfx-app-shell__aside)) {
  grid-template-columns: 1fr;
}
